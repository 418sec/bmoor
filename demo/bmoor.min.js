;(function(){
/** bmoor v0.2.0 **/
var bMoor={};!function(t){"use strict";function r(){return++ft}function n(t){var n=t.$$bmoorUid;return n||(n=t.$$bmoorUid=r()),n}function e(t){return t.$$bmoorUid}function o(t){return t?x(t)?t.split("."):dt(t)?t.slice(0):t:[]}function i(t,r,n){var e,i,u,s=n||lt;if(t&&(x(t)||_(t))){t=o(t),i=t.pop();for(var c=0;c<t.length;c++)u=t[c],w(s[u])&&(s[u]={}),s=s[u];e=s[i],s[i]=r}return e}function u(t,r){var n,e,i,u=r||bMoor.namespace.root;if(t&&(x(t)||_(t))){t=o(t),e=t.pop();for(var s=0;s<t.length;s++){if(i=t[s],w(u[i]))return;u=u[i]}n=u[e],delete u[e]}return n}function s(t,r){var n,e=r||bMoor.namespace.root;if(t&&(x(t)||_(t))){t=o(t);for(var i=0;i<t.length;i++)n=t[i],w(e[n])&&(e[n]={}),e=e[n];return e}if(O(t))return t;if(E(t))return t(r);throw new Error("unsupported type")}function c(t,r){var n=r||bMoor.namespace.root;if(x(t)||_(t)){t=o(t);for(var e=0;e<t.length;e++){var i=t[e];if(w(n[i]))return;n=n[i]}return n}if(O(t))return t;throw new Error("unsupported type")}function a(t,r){var n,e,o;if(_(r)&&r.length>0){for(n=0,e=r.length;e>n&&!o;n++)o=c(t,r[n]);return o}return c(t,r)}function f(t,r,n){var e;n?(n.$aliases||(n.$aliases={}),e=n.$aliases):e=ht,e[t]=r}function l(t,r){var n;return r?(r.$aliases||(r.$aliases={}),n=r.$aliases):n=ht,n[t]}function h(t,r){i(t,r,bMoor)}function d(t,r,n){var e,o,i;if(x(t)&&(t=s(t,n)),i="return new obj(",arguments.length>1)for(e=0,o=r.length;o>e;e++)e&&(i+=","),i+="args["+e+"]";return i+=")",new Function("obj","args",i)(t,r)}function p(t,r){return Q(r,function(r,n){i(n,r,t)}),t}function b(t){return t.prototype&&(t=t.prototype),m(t)}function m(t){if(Object.create){var r=function(){};return r.prototype=t,new r}return Object.create(t)}function v(t){return N(arguments,function(r){r!==t&&(t&&t.extend?t.extend(r):Q(r,function(r,n){t[n]=r}))}),t}function g(t){var r,n,e,o=function(r,n){t[n]=g(t[n],r)};for(n=1,e=arguments.length;e>n;n++)r=arguments[n],t!==r&&r&&(t&&t.merge?t.merge(r):O(t)?L(r,o):t=O(r)?g({},r):r);return t}function M(t,r,n){return L(r,function(r,e){var o=t[e];void 0===o&&(!n||r&&r.$constructor)?t[e]=r:bMoor.isArrayLike(r)?(bMoor.isArrayLike(o)||(o=t[e]=[]),y(o,r,n)):bMoor.isObject(r)?(bMoor.isObject(o)||(o=t[e]={}),M(o,r,n)):r!==o&&(t[e]=r)}),L(t,function(n,e){void 0===r[e]&&delete t[e]}),t}function y(t,r,n){var e,o,i,u;for(_(t)&&_(r)&&(t.length=r.length),e=0,o=r.length;o>e;e++)i=r[e],u=t[e],void 0!==u||n?bMoor.isArrayLike(i)?(bMoor.isArrayLike(u)||(u=t[e]=[]),y(u,i,n)):bMoor.isObject(i)?(bMoor.isObject(u)||(u=t[e]={}),M(u,i,n)):i!==u&&(t[e]=i):t[e]=i;return t}function k(t,r){var n,e,o,i=typeof t,u=typeof r;if(t===r)return!0;if(t!==t&&r!==r)return!0;if(null===t||void 0===t||null===r||void 0===r)return!1;if(t.equals)return t.equals(r);if(r.equals)return r.equals(t);if(i===u&&"object"===i)if(_(t)){if(!_(r))return!1;if((n=t.length)===r.length){for(e=0;n>e;e++)if(!k(t[e],r[e]))return!1;return!0}}else if(!_(r)){o={};for(e in t)if(t.hasOwnProperty(e)){if(!k(t[e],r[e]))return!1;o[e]=!0}for(e in r)if(r.hasOwnProperty(e)&&!o&&void 0!==r[e])return!1}return!1}function j(t){t.message?(console.log(t.message),console.log(t.stack)):(console.log(t),console.trace())}function w(t){return void 0===t}function $(t){return void 0!==t}function x(t){return"string"==typeof t}function A(t){return"number"==typeof t}function E(t){return"function"==typeof t}function O(t){return t&&"object"==typeof t}function P(t){return"boolean"==typeof t}function _(t){return t?O(t)&&(0===t.length||0 in t&&t.length-1 in t):!1}function S(t){return"function"==typeof t&&t.$isQuark}function I(t){var r;if(!O(t))return _(t)?0===t.length:w(t);for(r in t)if(t.hasOwnProperty(r))return!1;return!0}function F(t){return O(t)&&void 0!==t.then}function C(t){return dt(t)&&E(t[t.length-1])}function N(t,r,n){var e,o;for(n||(n=t),e=0,o=t.length;o>e;++e)e in t&&r.call(n,t[e],e,t)}function D(t,r,n){var e;n||(n=t);for(e in t)t.hasOwnProperty(e)&&r.call(n,t[e],e,t)}function Q(t,r,n){var e;n||(n=t);for(e in t)t.hasOwnProperty(e)&&"_"!==e.charAt(0)&&r.call(n,t[e],e,t)}function L(t,r,n){var e;n||(n=t);for(e in t)t.hasOwnProperty(e)&&"_"!==e.charAt(0)&&"$"!==e.charAt(0)&&r.call(n,t[e],e,t)}function q(t,r,n){L(t,function(t,e,o){E(t)||r.call(n,t,e,o)})}function U(t,r,n){t&&(t.forEach&&t.forEach!==U?t.forEach(r,n):_(t)?N(t,r,n):E(t)?Q(t,r,n):D(t,r,n))}function B(t){var r;return S(t)?t.$getDefinition():O(t)&&t.then?t:(r=new ot,r.resolve(t),r.promise)}function J(t){var r;return r=new ot,r.reject(t),r.promise}function T(t,r){var n,e=o(t),u=a(e),s=function(){throw new Error("You tried to construct a Quark: "+e.join("."))};return S(u)?u:(r=r||bMoor.namespace.root,s.$isQuark=!0,ot&&(s.$getDefinition=function(){return n=new ot,u&&n.resolve(u()),n.promise},s.$set=function(t){e&&i(e,t,r),n&&n.resolve(t)},s.$setDefinition=function(t){u=function(){return B(t()).then(function(t){return e&&i(e,t,r),t})},n&&n.resolve(u())}),i(e,s,r),s)}function R(t,r,n){var e=a(t,r,n);return e?B(e):T(t,r).$getDefinition()}function z(t,r){var n=t.charAt(0);return"@"===n?l(t.substr(1),r):"-"===n?a(t.substr(1),r):("+"===n&&(t=t.substr(1)),R(t,r))}function H(t,r){var n=[];return N(t,function(t,e){n[e]=x(t)?bMoor.decode(t,r):t}),n}function Y(t,r,n){var e;return x(t)?R(t,n):_(t)?(e=new it,N(t,function(o,i){r&&x(o)&&(o=R(o,n)),F(o)?(o.then(function(r){t[i]=r}),e.add(o)):t[i]=o}),e.run(),e.promise.then(function(){return t})):void 0}function G(t,r,n){var e;if(E(t))e=t,t=[];else{if(!C(t))throw new Error("inject needs arr to be either Injectable or Function, received:"+typeof t);e=t[t.length-1]}return n||(n=bMoor),Y(H(t,r),!1,r).then(function(t){return e.apply(n,t)})}function W(t){var r=t,n=document.createElement("a");return ct&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}function K(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function V(t,r,n){if(t.indexOf)return t.indexOf(r,n);var e=parseInt(t.length,0);for(n=+n||0,Math.abs(n)===1/0&&(n=0),0>n&&(n+=e,0>n&&(n=0));e>n;n++)if(t[n]===r)return n;return-1}function X(t,r,n){var e=V(t,r,n);return e>-1?t.splice(e,1)[0]:void 0}function Z(t,r,n){var e,o=V(t,r,n);return o>-1?(e=Z(t,r,o+1),e.unshift(t.splice(o,1)[0]),e):[]}function tt(t,r,n,e){var o,i,u=0,s=t.length-1;if(e||t.sort(function(t,r){return n(t)-n(r)}),n(t[u])>=r)return{left:u,right:u};if(n(t[s])<=r)return{left:s,right:s};if(t.length){for(;s-u>1;)o=Math.floor((s+u)/2),i=n(t[o]),i===r?(s=o,u=o):i>r?s=o:u=o;return s!==o&&n(t[s])===r?{left:s,right:s}:u!==o&&n(t[u])===r?{left:u,right:u}:{left:u,right:s}}}function rt(t,r,n){if(t.filter)return t.filter(r,n);var e,o,i=Object(this),u=parseInt(i.length,10),s=[];if(!E(r))throw new Error("func needs to be a function");for(e=0;u>e;e++)e in i&&(o=i[e],r.call(n,o,e,i)&&s.push(o));return s}function nt(t,r,n){var e,o=[],i=[],u=[],s=[];for(t=t.slice(0),r=r.slice(0),t.sort(n),r.sort(n);t.length>0&&r.length>0;)e=n(t[0],r[0]),0>e?o.push(t.shift()):e>0?i.push(r.shift()):(u.push(t.shift()),s.push(r.shift()));for(;t.length;)o.push(t.shift());for(;r.length;)i.push(r.shift());return{left:o,intersection:{left:u,right:s},right:i}}function et(t){this.defer=t}function ot(t){this.handler=t||this.defaultHandler,this.callbacks=[],this.value=null,this.promise=new et(this)}function it(){this.count=0,this.loaded=!1,this.errors=[],this.defer=new ot,this.promise=this.defer.promise}function ut(t){var r=[];return q(t,function(t){r.push(t)}),r}function st(t){var r=[];return q(t,function(t,n){r.push(n)}),r}var ct,at,ft=0,lt={},ht={};t.navigator?(t.bMoor=bMoor,ct=parseInt((/msie (\d+)/.exec(navigator.userAgent.toLowerCase())||[])[1],10),isNaN(ct)&&(ct=parseInt((/trident\/.*; rv:(\d+)/.exec(navigator.userAgent.toLowerCase())||[])[1],10)),at={isNode:!1,msie:ct}):(module.exports=bMoor,at={isNode:!0});var dt=function(t){return t instanceof Array};G.getInjections=function(t){return C(t)?t.slice(0,-1):[]},f("undefined",void 0),i("bmoor.defer.Promise",et),v(et.prototype,{then:function(t,r){function n(r){try{i.resolve((t||o.defaultSuccess).call(i,r))}catch(n){i.reject(n),o.handler(n)}}function e(t){try{i.resolve((r||o.defaultFailure).call(i,t))}catch(n){i.reject(n),o.handler(n)}}var o=this.defer,i=this.defer.sub();return o.register(n,e),i.promise},"catch":function(t){return this.then(null,t)},done:function(t){return this.then(t),this},fail:function(t){return this.then(null,t),this},"finally":function(t){function r(t,r){var n=new ot;return r?n.resolve(t):n.reject(t),n.promise}function n(n,o){var i=null;try{i=(t||e.defaultSuccess)()}catch(u){return r(u,!1)}return i&&bMoor.isFunction(i.then)?i.then(function(){return r(n,o)},function(t){return r(t,!1)}):r(n,o)}var e=this;return this.then(function(t){return n(t,!0)},function(t){return n(t,!1)})},always:function(t){return this["finally"](t),this}}),i("bmoor.defer.Basic",ot),function(){function t(t){return t&&t.then?t:{then:function(r){bMoor.isArrayLike(t)&&t.$inject?r.apply(void 0,t):r(t)}}}function r(t){return{then:function(r,n){n(t)}}}v(ot.prototype,{defaultHandler:function(t){bMoor.error.report(t)},defaultSuccess:function(t){this.resolve(t)},defaultFailure:function(t){this.reject(t)},register:function(t,r){this.callbacks?this.callbacks.push([t,r]):this.value.then(t,r)},resolve:function(r){var n,e,o,i;if(this.callbacks)for(n=this.callbacks,this.callbacks=null,this.value=t(r),o=0,i=n.length;i>o;o++)e=n[o],this.value.then(e[0],e[1])},reject:function(t){this.resolve(r(t))},sub:function(){return new ot(this.handler)}})}(),i("bmoor.defer.Group",it),function(){function t(t){0===t.count&&t.loaded&&(t.errors.length?t.defer.reject(t.errors):t.defer.resolve(!0))}function r(r){r.count--,t(r)}v(it.prototype,{add:function(t){var n=this;t&&(this.count++,t.then(function(){r(n)},function(t){n.errors.push(t),r(n)}))},run:function(){this.loaded=!0,t(this)}})}(),i("bmoor.defer.all",function(){var t,r=new it;return t=A(arguments[0].length)?arguments[0]:arguments,bMoor.forEach(t,function(t){r.add(t)}),r.run(),r.promise}),v(bMoor,{namespace:{root:lt},parseNS:o,dwrap:B,dfail:J,set:i,get:s,del:u,exists:a,register:f,check:l,makeQuark:T,ensure:R,decode:z,request:Y,translate:H,inject:G,plugin:h,loop:N,each:D,iterate:Q,forEach:U,isBoolean:P,isDefined:$,isUndefined:w,isArray:dt,isArrayLike:_,isObject:O,isFunction:E,isNumber:A,isString:x,isEmpty:I,isQuark:S,isInjectable:C,data:{setUid:n,getUid:e},object:{safe:L,naked:q,mask:m,equals:k,inherit:b,instantiate:d,extend:v,merge:g,override:M,explode:p,values:ut,keys:st},string:{trim:K},array:{compare:nt,indexOf:V,remove:X,removeAll:Z,filter:rt,override:y,bisect:tt},error:{report:j},url:{resolve:W}})}(this),bMoor.inject(["bmoor.defer.Basic",function(t){"use strict";function r(){}function n(n,e){var o,i=new t,u=i.promise;if(bMoor.isObject(e))return e["abstract"]?(o=function(){throw new Error("You tried to instantiate an abstract class")},o.prototype=new r):e.construct?o=e.construct:(o=function(){return!bMoor.isFunction(e.parent)||e.parent.prototype instanceof r?void 0:e.parent.apply(this,arguments)},o.$generic=!0),n.clean||(n.preProcess.sort(function(t,r){return r.rank-t.rank}),n.postProcess.sort(function(t,r){return r.rank-t.rank}),n.clean=!0),bMoor.loop(n.preProcess,function(t){u=u.then(function(r){return bMoor.inject(t.module,e,r).then(function(t){return t?t:r})})}),bMoor.loop(n.postProcess,function(t){u=u.then(function(r){return bMoor.inject(t.module,e,r).then(function(t){return t?t:r})})}),e.$aliases={"this":o,whenDefined:u},i.resolve(o),u;throw new Error("Constructor has no idea how to handle as definition of "+e)}var e,o=bMoor.makeQuark("bmoor.build.Compiler"),i=function(){this.preProcess=[],this.postProcess=[],this.clean=!0,this.makes={},this.defines={},this.root=bMoor.namespace.root};i.prototype.clone=function(){var t=new i;return t.preProcess=bMoor.object.extend([],this.preProcess),t.postProcess=bMoor.object.extend([],this.postProcess),t.clean=this.clean,t.makes=bMoor.object.extend({},this.makes),t.defines=bMoor.object.extend({},this.defines),t.root=bMoor.object.override({},this.root,!0),t},bMoor.plugin("isAbstract",function(t){return t instanceof r}),i.prototype.addModule=function(t,r,n){t=parseInt(t,10),this.clean=!1,arguments.length<3?n=r:bMoor.set(r,n[n.length-1],this.root),t>=0?this.preProcess.push({rank:t,module:n}):this.postProcess.push({rank:t,module:n})},i.prototype.make=function(t,r){var n,e,o=this;if(!bMoor.isString(t))throw new Error(JSON.stringify(t)+" > "+JSON.stringify(r)+" > message : you need to define a name and needs to be either a string or an array");return n=bMoor.parseNS(t),this.makes[t]=r,e=bMoor.makeQuark(n,this.root),e.$setDefinition(function(){return o.build(r).then(function(r){return r.prototype?r.prototype._$name=t:r._$name=t,r})}),e},i.prototype.setRoot=function(t){this.root=t},i.prototype.build=function(t){var r=this;return bMoor.isInjectable(t)||!function(){var r=t;t=[function(){return r}]}(),bMoor.inject(t,this.root).then(function(t){return n(r,t)})},i.prototype.redeclair=function(t){var r,n,e,o,i=this.makes[t];if(this.makes[t]?e="make":(i=this.defines[t],this.defines[t]&&(e="define")),e){for(o=bMoor.inject.getInjections(i),r=0,n=o.length;n>r;r++)this.redeclair(o[r]);this[e](t,i)}},i.prototype.override=function(t){var r=this.root,n=this.makes;bMoor.iterate(t,function(t,e){bMoor.isString(e)&&(e=bMoor.get(e,r),delete n[e]),bMoor.isQuark(e)?e.$getDefinition().then(function(n){bMoor.set(t,n,r)}):bMoor.set(t,e,r),delete n[t]})},i.prototype.mock=function(t,r){var e=this,o=bMoor.object.extend({},this.root,r),i=this.makes[t];return bMoor.isInjectable(i)||!function(){var t=i;i=[function(){return t}]}(),bMoor.inject(i,o).then(function(t){return n(e,t)})},i.prototype.define=function(t,r){var n,e;if(!bMoor.isString(t))throw new Error(JSON.stringify(t)+" > "+JSON.stringify(r)+" > message : you need to define a name and needs to be either a string or an array");return n=bMoor.parseNS(t),e=bMoor.makeQuark(t,this.root),bMoor.isInjectable(r)?(bMoor.inject(r,this.root).then(function(t){e.$set(t)}),this.defines[t]=r):e.$set(r),e},e=new i,e.$constructor=i,bMoor.plugin("make",function(t,r){return e.make(t,r)}),bMoor.plugin("define",function(t,r){return e.define(t,r)}),bMoor.plugin("test",{debug:function(t){console.log("clone",t,bMoor.get(t,e.clone().root)),console.log("primary",t,bMoor.get(t,e.root))},injector:function(t,r){return function(){var n=e.clone();r&&(n.override(r),bMoor.iterate(bMoor.inject.getInjections(t),function(t){n.redeclair(t)})),bMoor.inject(t,n.root)}},make:function(t){var r;return e.clone().build(t).then(function(t){r=t}),r},mock:function(t,r){var n;return e.mock(t,bMoor.object.explode(r)).then(function(t){n=t}),n}}),o.$set(e)}]),bMoor.inject(["bmoor.build.Compiler",function(t){"use strict";t.addModule(11,"bmoor.build.ModExtend",["-extend",function(t){var r,n,e=this.prototype;if(t)for(r=0,n=t.length;n>r;r++)t[r]._$extend(e)}])}]),bMoor.inject(["bmoor.build.Compiler",function(t){"use strict";t.addModule(5,"bmoor.build.ModFactory",["-factory",function(t){var r=this;t&&bMoor.iterate(t,function(t,n){r["$"+n]=function(){return t.apply(r,arguments)}})}])}]),bMoor.inject(["bmoor.build.Compiler",function(t){"use strict";t.addModule(-100,"bmoor.build.ModFinalize",["-finalize",function(t){t&&t(this)}])}]),bMoor.inject(["bmoor.build.Compiler",function(t){"use strict";t.addModule(90,"bmoor.build.ModInherit",["-id","-namespace","-name","-mount","-parent",function(t,r,n,e,o){var i;o&&(i=this,this.prototype=bMoor.object.inherit(o),this.prototype.constructor=i,delete this.$generic)}])}]),bMoor.inject(["bmoor.build.Compiler",function(t){"use strict";t.addModule(-1,"bmoor.build.ModInstances",["-instances",function(t){var r=this;t&&bMoor.iterate(t,function(t,n){r["$"+n]=bMoor.instantiate(r,t)})}])}]),bMoor.inject(["bmoor.build.Compiler",function(t){"use strict";t.addModule(10,"bmoor.build.ModProperties",["-properties",function(t){var r=this.prototype;t&&bMoor.each(t,function(t,n){r[n]=t})}])}]),bMoor.inject(["bmoor.build.Compiler",function(t){"use strict";t.addModule(0,"bmoor.build.ModRegister",["-id",function(t){bMoor.register(t,this)}])}]),bMoor.inject(["bmoor.build.Compiler",function(t){"use strict";t.addModule(-1,"bmoor.build.ModSingleton",["-singleton",function(t){var r,n=this;return t?(r=bMoor.object.instantiate(n,[]),r.$constructor=n,r):void 0}])}]),bMoor.inject(["bmoor.build.Compiler",function(t){"use strict";t.addModule(10,"bmoor.build.ModStatics",["-statics",function(t){var r=this;t&&bMoor.iterate(t,function(t,n){r[n]=t})}])}]),bMoor.inject(["bmoor.build.Compiler",function(t){"use strict";t.addModule(89,"bmoor.build.ModWrapper",["-wrap",function(t){t&&(this.prototype.$wrap=function(){function r(t,r,n){t[n]=bMoor.isFunction(r)?function(){return r.apply(e,arguments)}:r}var n,e=bMoor.object.instantiate(t,arguments);this.$wrapped=e;for(n in e)n in this||r(this,e[n],n)})}])}]),bMoor.make("bmoor.defer.Stack",["bmoor.defer.Basic",function(t){"use strict";return{construct:function(){this.active=null,this.defer=new t,this.promise=this.defer.promise},properties:{run:function(){var t=this;this.active.then(function(r){t.defer.resolve(r)},function(r){t.defer.reject(r)})},add:function(t,r,n){var e=this;return this.active=this.active?this.active.then(function(){return t.apply(n,r)},function(t){e.defer.reject(t)}):bMoor.dwrap(t.apply(n,r)),this}}}}]),bMoor.make("bmoor.flow.Interval",[function(){"use strict";return{construct:function(){this.clearAll()},properties:{set:function(t,r,n){var e,o=this.timeouts[r],i=this._c++;return o||(o=this.timeouts[r]={_c:0},bMoor.testMode||(o._hk=setInterval(function(){bMoor.iterate(o,function(t){t()})},r))),e=o._c++,o[e]=function(){t.call(n)},this.hash[i]={hk:o._c,val:r},i},flush:function(){bMoor.iterate(this.timeouts,function(t){bMoor.iterate(t,function(t){t()})})},clear:function(t){var r=this.hash[t];r&&(delete this.timeouts[r.val][r.hk],delete this.hash[t])},clearAll:function(){this._c=0,this.timeouts={},this.hash={}}},singleton:!0}}]),bMoor.define("bmoor.flow.Regulator",["bmoor.flow.Timeout",function(t){"use strict";return function(r,n,e,o){function i(){var e=a+n;e>=l||e>=f?(l=null,r.apply(o,s)):(a=e,c=t.set(i,n))}function u(){var r=+new Date;s=arguments,f=r+n,l||(a=r,l=r+e,c=t.set(i,n))}var s,c,a,f,l;return u.clear=function(){t.clear(c),c=null,l=null},u.flush=function(){l=0,i(),this.clear()},u.shift=function(t){f+=t},u}}]),bMoor.make("bmoor.flow.Timeout",[function(){"use strict";return{construct:function(){},properties:{set:function(t,r,n){return setTimeout(function(){t.call(n)},r)},clear:function(t){clearTimeout(t)}},singleton:!0}}]),bMoor.make("bmoor.error.Basic",["@undefined",function(t){"use strict";return{parent:Error,construct:function(r,n,e){var o,i;try{throw new Error}catch(u){i=u}this.name=this.__class,this.error=r,this.fileName=n,this.lineNumber=e,this.problem=t,i.stack&&(o=i.stack.split("\n"),"Error"===o[0]?(o.shift(),o.shift(),o.shift()):(o.pop(),o.shift(),o.shift()),this.problem=o[0],this.stack=o.join("\n")),this.message=r+"\n"+this.stack},properties:{toString:function(){return this.name+": "+this.message}}}}]),bMoor.make("bmoor.extender.Decorator",[function(){"use strict";function t(t,r,n){var e=r[t];void 0===e?r[t]=n:bMoor.isFunction(n)?bMoor.isFunction(e)?r[t]=function(){var t,r=this.$old;return this.$old=e,t=n.apply(this,arguments),this.$old=r,t}:console.log("attempting to decorate "+t+" an instance of "+typeof e):console.log("attempting to decorate with "+t+" and instance of "+typeof n)}return{"abstract":!0,properties:{_$extend:function(r){var n;for(n in this)("_"!==n.charAt(0)||"$"!==n.charAt(1))&&t(n,r,this[n])}}}}]),bMoor.make("bmoor.extender.Mixin",[function(){"use strict";return{"abstract":!0,properties:{_$extend:function(t){var r;for(r in this)("_"!==r.charAt(0)||"$"!==r.charAt(1))&&(t[r]=this[r])}}}}]),bMoor.make("bmoor.extender.Plugin",[function(){"use strict";function t(t,r,n){var e=n[t],o=r[t];void 0===o?r[t]=bMoor.isFunction(e)?function(){return e.apply(n,arguments)}:e:bMoor.isFunction(e)?bMoor.isFunction(o)?r[t]=function(){var t,i=n.$old,u=n.$target;return n.$target=r,n.$old=function(){return o.apply(r,arguments)},t=e.apply(n,arguments),n.$old=i,n.$target=u,t}:console.log("attempting to plug-n-play "+t+" an instance of "+typeof o):console.log("attempting to plug-n-play with "+t+" and instance of "+typeof e)}return{"abstract":!0,properties:{_$extend:function(r){var n;this._$onExtend&&this._$onExtend(r);for(n in this)("_"!==n.charAt(0)||"$"!==n.charAt(1))&&t(n,r,this)}}}}]);
}());