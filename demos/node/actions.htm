<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<script src="../../src/jquery.min.js"></script>
<script src="../../src/bMoor.js"></script>
<script src='../../src/jquery/jquery.jqote2.js'></script>
<script>
	bMoor.autoload.setRoot('../../src');
	bMoor.autoload.setLibrary( ['jquery'], '../../src/jquery', {fullName : true} );
</script>
<script src='../../src/bmoor/lib/WaitFor.js'></script>
<script src='../../src/bmoor/lib/MouseTracker.js'></script>
<script src='../../src/bmoor/lib/Bootstrap.js'></script>
<script src='../../src/bmoor/templating/JQote.js'></script>
<script src='../../src/bmoor/observer/Map.js'></script>
	
<script src="../../src/bmoor/snap/Node.js"></script>
<script src="../../src/bmoor/snap/List.js"></script>
</head>
<body>

<script>
	var dataSet = { 
			foo : 'foot', 
			bar : { uh:'yay' }, 
			list: [
				{x:'eins'},
				{x:'zwei'},
				{x:'drei'}
			]
		}; 

	bMoor.constructor.define({
		name : 'Tester',
		namespace : ['test'],
		parent: ['bmoor','snap','Node'],
		node : {
			className : 'tester',
			actions : {
				'mouseover' : function(){
					console.log( 'mouseover' );
				},
				'click' : {
					'' : function(){
						alert('ouch');
					},
					'b' : function( event ){
						alert('bold');
						event.stopPropagation();
					},
					'.snap-node' : function( event, node, helpers ){
						if ( !helpers.count ){
							helpers.count = 1;
						}else{
							helpers.count++;
						}
						
						console.log( helpers.count, node );
					}
				}
			}
		}
	});

	bMoor.constructor.define({
		name : 'Controller',
		namespace : ['test'],
		parent : ['bmoor','controller','Abstract'],
		require : {
			classes : [ 
				['bmoor','model','Map'],
				['bmoor','model','Collection']
			]
		},
		properties : {
			_model : function( ){ 
				var data = dataSet;

				data.list = new bmoor.model.Collection( data.list );
				data = new bmoor.model.Map( data );

				return data;
			}
		}
	});
</script>

<div snap-node="test.Tester" snap-template="template1" snap-control="test.Controller"></div>

<script>var dataSet = { foo:'foot', bar:{uh:'yay'}, list:[{x:'eins'},{x:'zwei'},{x:'drei'}] };</script>
<script type="text/html" id="template1">
<![CDATA[
	<b><#= this.foo #></b>
	<span snap-node="bmoor.snap.Node" snap-template="template2" snap-scope="bar"></span>
]]>
</script>
<script type="text/html" id="template2">
<![CDATA[
	<i><#= this.uh #></i>
]]>
</script>
<script type="text/html" id="list1">
<![CDATA[
	<i><#= this.x #></i>
]]>
</script>
</body>
</html>