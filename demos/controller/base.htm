<!DOCTYPE html>
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
	<script src="../../src/jquery.min.js"></script>
	<script src="../../src/bMoor.js"></script>
	<script src="../../src/bmoor/controller/Abstract.js"></script>
	<script src="../../src/bmoor/snap/List.js"></script>

	<script>
		var lowData = [{
			description: 'derp',
			key : 1,
			label : 1,
			display : 2
		}, {
			description: 'derp2',
			key : 2,
			label : 3,
			display : 4
		}];

		$(document).ready(function(){
			$('#addButton').click(function(){
				lowView.data.push({
					description : '',
					label : '',
					display : ''
				});
			});
		});

		bMoor.constructor.define({
			name : 'Tester',
			namespace : [ 'test' ],
			parent : [ 'bmoor','controller','Abstract' ],
			actions : {
				sum : function(){ return 999; }
			},
			properties : {
				_key : 'key',
				_sendCreate : function( model ){
					console.log( 'creating', model );
				},
				_sendUpdate : function( model ){
					console.log( 'changing', model );
				},
				_sendRemove : function( model ){
					console.log( 'removing', model );
				}
			}
		});
	</script>
</head>
<body>
	<table snap-class="bmoor.snap.List" snap-data="lowData" snap-child="tr" snap-mount="mount" 
		snap-template="temp" snap-publish="lowView" snap-controller="test.Tester">
		<tbody>
			<tr class='mount'>
	            <th>Description</th>
	            <th>Label</th>
	            <th>Display</th>
	            <th>&nbsp;</th>
        	</tr>
        </tbody>
	</table>
	<button id="addButton"> Add Row </button>
	<script id='temp' type='text/html'>
		<td><input snap-class='bmoor.snap.form.Text' snap-variable="_.sum()" type='text' name='description'/></td>
        <td><input snap-class='bmoor.snap.form.Text' type='text' name='label'/></td>
        <td><input snap-class='bmoor.snap.form.Text' type='text' name='display'/></td>
        <td><button snap-class='bmoor.snap.form.Button' type='button' name='_remove' value="1">Remove</button></td>
	</script>
</body>

</html>